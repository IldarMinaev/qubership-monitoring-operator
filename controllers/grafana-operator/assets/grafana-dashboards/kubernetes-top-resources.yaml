apiVersion: integreatly.org/v1alpha1
kind: GrafanaDashboard
metadata:
  name: kubernetes-top-resources
  labels:
    app.kubernetes.io/component: monitoring
spec:
  json: >
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "datasource",
              "uid": "grafana"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          },
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "enable": false,
            "expr": "max_over_time(kube_pod_status_phase{cluster=\"${cluster}\", phase!=\"Running\", exported_pod!~\"${exclude_annotations}\"}[$__rate_interval]) == 1",
            "iconColor": "red",
            "name": "Pod not in running state",
            "step": "1h",
            "tagKeys": "NotRunning",
            "textFormat": "{{phase}} {{exported_pod}} on {{exported_namespace}}",
            "titleFormat": "Pod not running:",
            "useValueForTime": false
          },
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "enable": false,
            "expr": "max_over_time(kube_pod_container_status_terminated_reason{reason!=\"Completed\", cluster=\"$cluster\", exported_pod!~\"${exclude_annotations}\"}[$__rate_interval]) == 1",
            "iconColor": "orange",
            "name": "Pod terminated",
            "step": "",
            "textFormat": "{{reason}} {{exported_pod}} on {{exported_namespace}}",
            "titleFormat": "Pod terminated:"
          },
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "enable": false,
            "expr": "increase(kube_pod_container_status_restarts_total{cluster=\"$cluster\", exported_pod!~\"${exclude_annotations}\"}[$__rate_interval]) > 0",
            "iconColor": "purple",
            "name": "Pod restarted",
            "textFormat": "{{exported_pod}} on {{exported_namespace}}",
            "titleFormat": "Container restarted"
          }
        ]
      },
      "description": "Show first N (can be selected) resources by CPU, Memory, Disk usage",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "links": [
        {
          "asDropdown": true,
          "icon": "external link",
          "includeVars": false,
          "keepTime": true,
          "tags": [
            "k8s"
          ],
          "targetBlank": true,
          "title": "Kubernetes",
          "tooltip": "",
          "type": "dashboards",
          "url": ""
        }
      ],
      "liveNow": false,
      "panels": [
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 43,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top pods by CPU usage",
          "type": "row"
        },
        {
          "datasource": {
            "uid": "${datasource}"
          },
          "description": "Show first $topN pods by CPU consumption.\nShow CPU usage in millicores, where `1000 millicores = 1 core`. In legend pods show as `namespace/pod`.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "Millicores",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 14,
            "x": 0,
            "y": 1
          },
          "id": 12,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "exemplar": true,
              "expr": "sum by (namespace, pod) (rate(container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\", cluster=\"$cluster\", pod=~\"$top_cpu_pods\"}[2m])) * 1000",
              "interval": "",
              "legendFormat": "{{ namespace }}/{{ pod }}",
              "refId": "A"
            }
          ],
          "title": "Top $topN by CPU usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Show first $topN namespaces by CPU consumption.\nShow CPU usage as:\n* CPU usage in millicores per pods\n* CPU requests per pods\n* CPU limits per pods",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Namespace"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 120
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Pod"
                },
                "properties": [
                  {
                    "id": "custom.width"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Limits"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 56
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Requests"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 77
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Usage"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 71
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 12,
            "w": 10,
            "x": 14,
            "y": 1
          },
          "id": 11,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "frameIndex": 0,
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Usage"
              }
            ]
          },
          "pluginVersion": "9.5.8",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(sum by (namespace, pod, container) (rate(container_cpu_usage_seconds_total{cluster=\"$cluster\", image!=\"\", container!~\"^(.*POD.*|)$\", pod=~\"$top_cpu_pods\"}[2m]))) by (namespace, pod) * 1000",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "CPU Usage",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "exemplar": false,
              "expr": "sum(label_replace(label_replace(kube_pod_container_resource_requests{cluster=\"$cluster\", exported_pod=~\"$top_cpu_pods\", resource=\"cpu\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\"), \"pod\", \"$1\", \"exported_pod\",\"(.*)\")) by (namespace, pod) * 1000",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "CPU Requests",
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "exemplar": false,
              "expr": "sum(label_replace(label_replace(kube_pod_container_resource_limits{resource=\"cpu\", cluster=\"$cluster\", exported_pod=~\"$top_cpu_pods\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\"), \"pod\", \"$1\", \"exported_pod\",\"(.*)\")) by (namespace, pod) * 1000",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "",
              "refId": "C"
            }
          ],
          "title": "Top $topN by CPU usage",
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "namespace",
                    "pod",
                    "Value #A",
                    "Value #B",
                    "Value #C"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Value #A": "Usage",
                  "Value #B": "Requests",
                  "Value #C": "Limits",
                  "namespace": "Namespace",
                  "pod": "Pod"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 13
          },
          "id": 45,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top pods by Memory usage",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Show first $topN pods by Memory consumption.\nIn legend pods show as `namespace/pod`",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 14,
            "x": 0,
            "y": 14
          },
          "id": 28,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", pod=~\"$top_mem_pods\"}) by (namespace, pod)",
              "interval": "",
              "legendFormat": "{{ namespace }}/{{ pod }}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Top $topN by Memory usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Show first $topN pods by Memory consumption.\nShow Memory usage as:\n* Memory usage per pod\n* Memory requests per pod\n* Memory limits per pod",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Usage"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 73
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Requests"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 74
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Limits"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 79
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Namespace"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 120
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 12,
            "w": 10,
            "x": 14,
            "y": 14
          },
          "id": 35,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "frameIndex": 0,
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Usage"
              }
            ]
          },
          "pluginVersion": "9.5.8",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", pod=~\"$top_mem_pods\"}) by (namespace, pod)",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Memory Usage",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "exemplar": false,
              "expr": "sum(label_replace(label_replace(kube_pod_container_resource_requests{resource=\"memory\", cluster=\"$cluster\", exported_pod=~\"$top_mem_pods\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\"), \"pod\", \"$1\", \"exported_pod\",\"(.*)\")) by (namespace, pod)",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Memory Requests",
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "exemplar": false,
              "expr": "sum(label_replace(label_replace(kube_pod_container_resource_limits{resource=\"memory\", cluster=\"$cluster\", exported_pod=~\"$top_mem_pods\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\"), \"pod\", \"$1\", \"exported_pod\",\"(.*)\")) by (namespace, pod)",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Memory Limits",
              "refId": "C"
            }
          ],
          "title": "Top $topN by Memory usage",
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "namespace",
                    "pod",
                    "Value #A",
                    "Value #B",
                    "Value #C"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Value #A": "Usage",
                  "Value #B": "Requests",
                  "Value #C": "Limits",
                  "namespace": "Namespace",
                  "pod": "Pod"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 26
          },
          "id": 6,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top pods by Disk usage",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Show first $topN pods by Disk consumption. In legend pods show as `namespace/pod`",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 14,
            "x": 0,
            "y": 27
          },
          "id": 30,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", pod=~\"$top_disk_read_pods\"}[5m])) by (namespace, pod)",
              "interval": "",
              "legendFormat": "{{ namespace }}/{{ pod }} - reads",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", pod=~\"$top_disk_write_pods\"}[5m])) by (namespace, pod) * -1",
              "hide": false,
              "interval": "",
              "legendFormat": "{{ namespace }}/{{ pod }} - writes",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Top $topN by Disk usage (Reads and Writes)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Show first $topN pods by Disk writes/reads consumption.\nShow Disk usage as:\n\n* Disk reads per seconds\n* Disk writes per seconds",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Namespace"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 120
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Reads"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 82
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Writes"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 104
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 12,
            "w": 10,
            "x": 14,
            "y": 27
          },
          "id": 31,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "frameIndex": 0,
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Writes"
              }
            ]
          },
          "pluginVersion": "9.5.8",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", pod=~\"$top_disk_read_pods\"}[5m])) by (namespace, pod)",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Disk Reads",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", pod=~\"$top_disk_write_pods\"}[5m])) by (namespace, pod)",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Disk Writes",
              "refId": "B"
            }
          ],
          "title": "Top $topN by Disk usage (Reads and Writes)",
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "namespace",
                    "pod",
                    "Value #A",
                    "Value #B"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Value #A": "Reads",
                  "Value #B": "Writes",
                  "namespace": "Namespace",
                  "pod": "Pod"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 39
          },
          "id": 17,
          "panels": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "description": "Show first $topN pods which were throttled by CPU limits.\n\nShow as rate by `container_cpu_cfs_throttled_seconds_total`. It means that this graph should show how many time pod spend in throttling per second.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "s"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 24,
                "x": 0,
                "y": 40
              },
              "id": 19,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull",
                    "max"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Max",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "${datasource}"
                  },
                  "exemplar": true,
                  "expr": "sum by (namespace, pod) (rate(container_cpu_cfs_throttled_seconds_total{pod=~\"$top_throttled_pods\"}[$__range]))",
                  "hide": false,
                  "interval": "",
                  "legendFormat": "{{ namespace }}/{{ pod }}",
                  "refId": "A"
                }
              ],
              "title": "Top $topN throttled pods, rate by seconds",
              "type": "timeseries"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top throttled pods",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 40
          },
          "id": 39,
          "panels": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "description": "Show first $topN namespace by CPU consumption.\nShow CPU usage in millicores, where `1000 millicores = 1 core`.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "Millicores",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 14,
                "x": 0,
                "y": 5
              },
              "id": 32,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Last *",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "exemplar": true,
                  "expr": "sum by (namespace) (rate(container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\", cluster=\"$cluster\", namespace=~\"$top_cpu_namespaces\"}[2m])) * 1000",
                  "interval": "",
                  "legendFormat": "{{ namespace }}",
                  "refId": "A"
                }
              ],
              "title": "Top $topN by CPU usage",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "description": "Show first $topN namespaces by CPU consumption.\nShow CPU usage as:\n* Sum of CPU usage in millicores in specified namespace\n* Sum of CPU requests for all pods in specified namespace\n* Sum of CPU limits for all pods in specified namespace",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "mappings": [],
                  "noValue": "-",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Usage"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 77
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Requests"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 80
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Limits"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 74
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 12,
                "w": 10,
                "x": 14,
                "y": 5
              },
              "id": 33,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "frameIndex": 0,
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "Usage"
                  }
                ]
              },
              "pluginVersion": "9.5.8",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(sum by (namespace) (rate(container_cpu_usage_seconds_total{cluster=\"$cluster\", image!=\"\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_cpu_namespaces\"}[2m]))) by (namespace) * 1000",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "CPU Usage",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "sum(label_replace(kube_pod_container_resource_requests{cluster=\"$cluster\", exported_namespace=~\"$top_cpu_namespaces\", resource=\"cpu\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\")) by (namespace) * 1000",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "CPU Requests",
                  "refId": "B"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "sum(label_replace(kube_pod_container_resource_limits{resource=\"cpu\", cluster=\"$cluster\", exported_namespace=~\"$top_cpu_namespaces\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\")) by (namespace) * 1000",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "",
                  "refId": "C"
                }
              ],
              "title": "Top $topN by CPU usage",
              "transformations": [
                {
                  "id": "merge",
                  "options": {}
                },
                {
                  "id": "filterFieldsByName",
                  "options": {
                    "include": {
                      "names": [
                        "namespace",
                        "pod",
                        "Value #A",
                        "Value #B",
                        "Value #C"
                      ]
                    }
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {},
                    "indexByName": {},
                    "renameByName": {
                      "Value #A": "Usage",
                      "Value #B": "Requests",
                      "Value #C": "Limits",
                      "namespace": "Namespace"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top namespaces by CPU usage",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 41
          },
          "id": 41,
          "panels": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "description": "Show first $topN namespace by Memory consumption.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "bytes"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 14,
                "x": 0,
                "y": 6
              },
              "id": 34,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Last *",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "editorMode": "code",
                  "exemplar": true,
                  "expr": "sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_mem_namespaces\"}) by (namespace)",
                  "interval": "",
                  "legendFormat": "{{ namespace }}",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "Top $topN by Memory usage",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "description": "Show first $topN namespaces by Memory consumption.\nShow Memory usage as:\n* Sum of Memory usage in millicores in specified namespace\n* Sum of Memory requests for all pods in specified namespace\n* Sum of Memory limits for all pods in specified namespace",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "mappings": [],
                  "noValue": "-",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "bytes"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Usage"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 81
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Requests"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 88
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Limits"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 83
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 12,
                "w": 10,
                "x": 14,
                "y": 6
              },
              "id": 29,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "frameIndex": 0,
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "Usage"
                  }
                ]
              },
              "pluginVersion": "9.5.8",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_mem_namespaces\"}) by (namespace)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Memory Usage",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "sum(label_replace(kube_pod_container_resource_requests{resource=\"memory\", cluster=\"$cluster\", exported_namespace=~\"$top_mem_namespaces\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\")) by (namespace)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Memory Requests",
                  "refId": "B"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "sum(label_replace(kube_pod_container_resource_limits{resource=\"memory\", cluster=\"$cluster\", exported_namespace=~\"$top_mem_namespaces\"}, \"namespace\", \"$1\", \"exported_namespace\",\"(.*)\")) by (namespace)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Memory Limits",
                  "refId": "C"
                }
              ],
              "title": "Top $topN by Memory usage",
              "transformations": [
                {
                  "id": "merge",
                  "options": {}
                },
                {
                  "id": "filterFieldsByName",
                  "options": {
                    "include": {
                      "names": [
                        "namespace",
                        "pod",
                        "Value #A",
                        "Value #B",
                        "Value #C"
                      ]
                    }
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {},
                    "indexByName": {},
                    "renameByName": {
                      "Value #A": "Usage",
                      "Value #B": "Requests",
                      "Value #C": "Limits",
                      "namespace": "Namespace"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top namespace by Memory usage",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 42
          },
          "id": 4,
          "panels": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "description": "Show first $topN namespaces by Disk consumption",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineStyle": {
                      "fill": "solid"
                    },
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "binBps"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 14,
                "x": 0,
                "y": 7
              },
              "id": 36,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Last *",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "editorMode": "code",
                  "exemplar": true,
                  "expr": "sum(rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_disk_read_namespaces\"}[5m])) by (namespace)",
                  "interval": "",
                  "legendFormat": "{{ namespace }} - reads",
                  "range": true,
                  "refId": "A"
                },
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "editorMode": "code",
                  "exemplar": true,
                  "expr": "sum(rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_disk_write_namespaces\"}[5m])) by (namespace) * -1",
                  "hide": false,
                  "interval": "",
                  "legendFormat": "{{ namespace }} - writes",
                  "range": true,
                  "refId": "B"
                }
              ],
              "title": "Top $topN by Disk usage (Reads and Writes)",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
              },
              "description": "Show first $topN namespaces by Disk writes/reads consumption.\nShow Disk usage as:\n\n* Disk reads per seconds\n* Disk writes per seconds",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "mappings": [],
                  "noValue": "-",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "binBps"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Reads"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 99
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Writes"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 124
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 12,
                "w": 10,
                "x": 14,
                "y": 7
              },
              "id": 37,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "frameIndex": 0,
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "Writes"
                  }
                ]
              },
              "pluginVersion": "9.5.8",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_disk_read_namespaces\"}[5m])) by (namespace)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Disk Reads",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "editorMode": "code",
                  "exemplar": false,
                  "expr": "sum(rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\", namespace=~\"$top_disk_write_namespaces\"}[5m])) by (namespace)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Disk Writes",
                  "refId": "B"
                }
              ],
              "title": "Top $topN by Disk usage (Reads and Writes)",
              "transformations": [
                {
                  "id": "merge",
                  "options": {}
                },
                {
                  "id": "filterFieldsByName",
                  "options": {
                    "include": {
                      "names": [
                        "namespace",
                        "pod",
                        "Value #A",
                        "Value #B"
                      ]
                    }
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {},
                    "indexByName": {},
                    "renameByName": {
                      "Value #A": "Reads",
                      "Value #B": "Writes",
                      "namespace": "Namespace"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top namespaces by Disk usage",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 43
          },
          "id": 47,
          "panels": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "description": "Show first $topN Kubernetes/OpenShift nodes by CPU consumption.\nShow CPU usage as CPU total usage percent (CPU usage / CPU cores). \n\nBecause there are a lot CPU spaces this metric calculate as:\n\n`(1 - idle usage) * 100`\n\n! This panel doesn't work in restricted mode if kube-state-metrics doesn't have permission to scrape the following resources: nodes",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 14,
                "x": 0,
                "y": 8
              },
              "id": 10,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Last *",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "exemplar": true,
                  "expr": "(1 - avg(irate(node_cpu_seconds_total{mode=\"idle\",cluster=\"$cluster\", instance=~\"$top_cpu_nodes\"}[5m]) * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (node)) * 100",
                  "hide": false,
                  "interval": "",
                  "legendFormat": "{{ node }}",
                  "refId": "B"
                }
              ],
              "title": "Top $topN by CPU usage, %",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "Show first $topN Kubernetes/OpenShift nodes by CPU consumption.\nShow CPU usage as:\n* CPU cores per nodes\n* CPU Load Average to last 5 minutes\n* CPU total usage percent (CPU usage / CPU cores)\n\n! This panel doesn't work in restricted mode if kube-state-metrics doesn't have permission to scrape the following resources: nodes",
              "fieldConfig": {
                "defaults": {
                  "custom": {
                    "align": "left",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "filterable": false,
                    "inspect": false
                  },
                  "decimals": 2,
                  "mappings": [],
                  "noValue": "-",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #C"
                    },
                    "properties": [
                      {
                        "id": "decimals",
                        "value": 0
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #F"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "percent"
                      },
                      {
                        "id": "thresholds",
                        "value": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green"
                            },
                            {
                              "color": "orange",
                              "value": 70
                            },
                            {
                              "color": "red",
                              "value": 85
                            }
                          ]
                        }
                      },
                      {
                        "id": "custom.cellOptions",
                        "value": {
                          "mode": "gradient",
                          "type": "color-background"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #H"
                    },
                    "properties": [
                      {
                        "id": "displayName",
                        "value": "Disk Reads / sec"
                      },
                      {
                        "id": "unit",
                        "value": "Bps"
                      },
                      {
                        "id": "thresholds",
                        "value": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green"
                            },
                            {
                              "color": "orange",
                              "value": 10485760
                            },
                            {
                              "color": "red",
                              "value": 20485760
                            }
                          ]
                        }
                      },
                      {
                        "id": "custom.cellOptions",
                        "value": {
                          "mode": "gradient",
                          "type": "color-background"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Node"
                    },
                    "properties": [
                      {
                        "id": "links",
                        "value": [
                          {
                            "targetBlank": true,
                            "title": "Node Details",
                            "url": "./d/{% printf `%.40s` (printf `%s-%s` .Release.Namespace (index .DashboardsUIDs `node-details`) ) %}/node-details?var-datasource=$datasource&var-cluster=$cluster&var-job=&var-node=&var-hostname=${__data.fields.Node}"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "CPU Load 5m"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 120
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Cores"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 54
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "CPU Usage"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 88
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 12,
                "w": 10,
                "x": 14,
                "y": 8
              },
              "id": 25,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "CPU Load 5m"
                  }
                ]
              },
              "pluginVersion": "9.5.8",
              "styles": [
                {
                  "alias": "Node",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 1,
                  "link": false,
                  "linkTooltip": "",
                  "linkUrl": "/d/200ac8fdbfbb74b39aff88918e4d1c2c/kubernetes-pods-distribution-by-node?var-datasource=$datasource&var-node=$__cell_1",
                  "mappingType": 1,
                  "pattern": "nodename",
                  "thresholds": [],
                  "type": "string",
                  "unit": "bytes"
                },
                {
                  "alias": "Memory",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "link": false,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "bytes"
                },
                {
                  "alias": "CPU Cores",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "Uptime",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "s"
                },
                {
                  "alias": "Disk Space Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #E",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "CPU Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #F",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "Memory Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #G",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "Disk Reads / sec",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #H",
                  "thresholds": [
                    "10485760",
                    "20485760"
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "Disk Writes / sec",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #I",
                  "thresholds": [
                    "10485760",
                    "20485760"
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "Download*",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #J",
                  "thresholds": [
                    "30485760",
                    "104857600"
                  ],
                  "type": "number",
                  "unit": "bps"
                },
                {
                  "alias": "Upload*",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #K",
                  "thresholds": [
                    "30485760",
                    "104857600"
                  ],
                  "type": "number",
                  "unit": "bps"
                },
                {
                  "alias": "CPU Load 5m",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #L",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "",
                  "align": "right",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "pattern": "/.*/",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "(node_uname_info{cluster=\"$cluster\",instance=~\"$top_cpu_nodes\"} -0) * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Labels",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "count(node_cpu_seconds_total{mode='system',cluster=\"$cluster\",instance=~\"$top_cpu_nodes\"} * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (instance)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "CPU",
                  "refId": "C"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "node_load5{cluster=\"$cluster\",instance=~\"$top_cpu_nodes\"} * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}",
                  "format": "table",
                  "instant": true,
                  "interval": "",
                  "legendFormat": "CPU Last 5m Load",
                  "refId": "L"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "(1 - avg(irate(node_cpu_seconds_total{mode=\"idle\",cluster=\"$cluster\",instance=~\"$top_cpu_nodes\"}[5m])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (instance)) * 100",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "CPU Usage",
                  "refId": "F"
                }
              ],
              "title": "Top $topN nodes by CPU usage",
              "transformations": [
                {
                  "id": "merge",
                  "options": {}
                },
                {
                  "id": "filterFieldsByName",
                  "options": {
                    "include": {
                      "names": [
                        "nodename",
                        "Value #D",
                        "Value #B",
                        "Value #C",
                        "Value #L",
                        "Value #F",
                        "Value #G",
                        "Value #E",
                        "Value #H",
                        "Value #I"
                      ]
                    }
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {},
                    "indexByName": {},
                    "renameByName": {
                      "Value #C": "Cores",
                      "Value #F": "CPU Usage",
                      "Value #L": "CPU Load 5m",
                      "nodename": "Node"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top nodes by CPU usage",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 44
          },
          "id": 49,
          "panels": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "description": "Show first $topN Kubernetes/OpenShift nodes by Memory consumption.\nShow Memory usage in percents from total node memory.\n\nAs base metrics use `node_memory_MemAvailable_bytes` to show used bytes per node\n\n! This panel doesn't work in restricted mode if kube-state-metrics doesn't have permission to scrape the following resources: nodes",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 14,
                "x": 0,
                "y": 9
              },
              "id": 52,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Last *",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "exemplar": true,
                  "expr": "(1 - ((node_memory_MemAvailable_bytes{cluster=\"$cluster\", instance=~\"$top_memory_nodes\"} / (node_memory_MemTotal_bytes{cluster=\"$cluster\", instance=~\"$top_memory_nodes\"})* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}))) * 100",
                  "hide": false,
                  "interval": "",
                  "legendFormat": "{{ node }}",
                  "refId": "B"
                }
              ],
              "title": "Top $topN nodes by Memory usage, %",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "Show first $topN Kubernetes/OpenShift nodes by Memory consumption.\nShow Memory usage as:\n\n* Memory on node\n* Memory usage percent\n\n! This panel doesn't work in restricted mode if kube-state-metrics doesn't have permission to scrape the following resources: nodes",
              "fieldConfig": {
                "defaults": {
                  "custom": {
                    "align": "left",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "filterable": false,
                    "inspect": false
                  },
                  "decimals": 2,
                  "mappings": [],
                  "noValue": "-",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #B"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "bytes"
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #G"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "percent"
                      },
                      {
                        "id": "thresholds",
                        "value": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green"
                            },
                            {
                              "color": "orange",
                              "value": 70
                            },
                            {
                              "color": "red",
                              "value": 85
                            }
                          ]
                        }
                      },
                      {
                        "id": "custom.cellOptions",
                        "value": {
                          "mode": "gradient",
                          "type": "color-background"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Node"
                    },
                    "properties": [
                      {
                        "id": "links",
                        "value": [
                          {
                            "targetBlank": true,
                            "title": "Node Details",
                            "url": "./d/{% printf `%.40s` (printf `%s-%s` .Release.Namespace (index .DashboardsUIDs `node-details`) ) %}/node-details?var-datasource=$datasource&var-cluster=$cluster&var-job=&var-node=&var-hostname=${__data.fields.Node}"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Memory"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 97
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Usage"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 76
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 12,
                "w": 10,
                "x": 14,
                "y": 9
              },
              "id": 50,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "Usage"
                  }
                ]
              },
              "pluginVersion": "9.5.8",
              "styles": [
                {
                  "alias": "Node",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 1,
                  "link": false,
                  "linkTooltip": "",
                  "linkUrl": "/d/200ac8fdbfbb74b39aff88918e4d1c2c/kubernetes-pods-distribution-by-node?var-datasource=$datasource&var-node=$__cell_1",
                  "mappingType": 1,
                  "pattern": "nodename",
                  "thresholds": [],
                  "type": "string",
                  "unit": "bytes"
                },
                {
                  "alias": "Memory",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "link": false,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "bytes"
                },
                {
                  "alias": "CPU Cores",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "Uptime",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "s"
                },
                {
                  "alias": "Disk Space Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #E",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "CPU Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #F",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "Memory Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #G",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "Disk Reads / sec",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #H",
                  "thresholds": [
                    "10485760",
                    "20485760"
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "Disk Writes / sec",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #I",
                  "thresholds": [
                    "10485760",
                    "20485760"
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "Download*",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #J",
                  "thresholds": [
                    "30485760",
                    "104857600"
                  ],
                  "type": "number",
                  "unit": "bps"
                },
                {
                  "alias": "Upload*",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #K",
                  "thresholds": [
                    "30485760",
                    "104857600"
                  ],
                  "type": "number",
                  "unit": "bps"
                },
                {
                  "alias": "CPU Load 5m",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #L",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "",
                  "align": "right",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "pattern": "/.*/",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "(node_uname_info{cluster=\"$cluster\", instance=~\"$top_memory_nodes\"} -0) * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}",
                  "format": "table",
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Labels",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "(node_memory_MemTotal_bytes{cluster=\"$cluster\", instance=~\"$top_memory_nodes\"} - 0) * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Memory",
                  "refId": "B"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "(1 - ((node_memory_MemAvailable_bytes{cluster=\"$cluster\", instance=~\"$top_memory_nodes\"} / (node_memory_MemTotal_bytes{cluster=\"$cluster\", instance=~\"$top_memory_nodes\"})* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}))) * 100",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Memory Usage",
                  "refId": "G"
                }
              ],
              "title": "Top $topN nodes by Memory usage",
              "transformations": [
                {
                  "id": "merge",
                  "options": {}
                },
                {
                  "id": "filterFieldsByName",
                  "options": {
                    "include": {
                      "names": [
                        "nodename",
                        "Value #D",
                        "Value #B",
                        "Value #C",
                        "Value #L",
                        "Value #F",
                        "Value #G",
                        "Value #E",
                        "Value #H",
                        "Value #I"
                      ]
                    }
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {},
                    "indexByName": {},
                    "renameByName": {
                      "Value #B": "Memory",
                      "Value #G": "Usage",
                      "nodename": "Node"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top nodes by Memory usage",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "prometheus",
            "uid": "PC3E95692D54ABCC0"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "id": 8,
          "panels": [
            {
              "datasource": {
                "uid": "${datasource}"
              },
              "description": "Show first $topN Kubernetes/OpenShift nodes by Disk consumption\n\n! This panel doesn't work in restricted mode if kube-state-metrics doesn't have permission to scrape the following resources: nodes",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 0,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "auto",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "binBps"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 12,
                "w": 14,
                "x": 0,
                "y": 10
              },
              "id": 53,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true,
                  "sortBy": "Last *",
                  "sortDesc": true
                },
                "tooltip": {
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "exemplar": true,
                  "expr": "max(irate(node_disk_read_bytes_total{cluster=\"$cluster\", instance=~\"$top_disk_read_nodes\"}[5m])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (node)",
                  "hide": false,
                  "interval": "",
                  "legendFormat": "{{ node }} - reads / sec",
                  "refId": "B"
                },
                {
                  "datasource": {
                    "uid": "${datasource}"
                  },
                  "exemplar": true,
                  "expr": "max((irate(node_disk_written_bytes_total{cluster=\"$cluster\", instance=~\"$top_disk_write_nodes\"}[5m])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"})) by (node) * -1",
                  "hide": false,
                  "interval": "",
                  "legendFormat": "{{ node }} - writes / sec",
                  "refId": "A"
                }
              ],
              "title": "Top $topN by Disk usage (Reads and Writes)",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "description": "Show first $topN Kubernetes/OpenShift nodes by Disk writes/reads consumption.\nShow Disk usage as:\n\n* Disk reads per seconds\n* Disk writes per seconds\n\n! This panel doesn't work in restricted mode if kube-state-metrics doesn't have permission to scrape the following resources: nodes",
              "fieldConfig": {
                "defaults": {
                  "custom": {
                    "align": "left",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "filterable": false,
                    "inspect": false
                  },
                  "decimals": 2,
                  "mappings": [],
                  "noValue": "-",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #H"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "binBps"
                      },
                      {
                        "id": "thresholds",
                        "value": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "orange",
                              "value": 10485760
                            },
                            {
                              "color": "red",
                              "value": 20485760
                            }
                          ]
                        }
                      },
                      {
                        "id": "custom.cellOptions",
                        "value": {
                          "mode": "gradient",
                          "type": "color-background"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Value #I"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "binBps"
                      },
                      {
                        "id": "thresholds",
                        "value": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "orange",
                              "value": 10485760
                            },
                            {
                              "color": "red",
                              "value": 20485760
                            }
                          ]
                        }
                      },
                      {
                        "id": "custom.cellOptions",
                        "value": {
                          "mode": "gradient",
                          "type": "color-background"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Node"
                    },
                    "properties": [
                      {
                        "id": "links",
                        "value": [
                          {
                            "targetBlank": true,
                            "title": "Node Details",
                            "url": "./d/{% printf `%.40s` (printf `%s-%s` .Release.Namespace (index .DashboardsUIDs `node-details`) ) %}/node-details?var-datasource=$datasource&var-cluster=$cluster&var-job=&var-node=&var-hostname=${__data.fields.Node}"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Reads / sec"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 112
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Writes / sec"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 110
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 12,
                "w": 10,
                "x": 14,
                "y": 10
              },
              "id": 51,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "Writes / sec"
                  }
                ]
              },
              "pluginVersion": "9.5.8",
              "styles": [
                {
                  "alias": "Node",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 1,
                  "link": false,
                  "linkTooltip": "",
                  "linkUrl": "/d/200ac8fdbfbb74b39aff88918e4d1c2c/kubernetes-pods-distribution-by-node?var-datasource=$datasource&var-node=$__cell_1",
                  "mappingType": 1,
                  "pattern": "nodename",
                  "thresholds": [],
                  "type": "string",
                  "unit": "bytes"
                },
                {
                  "alias": "Memory",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "link": false,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "bytes"
                },
                {
                  "alias": "CPU Cores",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "Uptime",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "s"
                },
                {
                  "alias": "Disk Space Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #E",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "CPU Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #F",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "Memory Usage",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #G",
                  "thresholds": [
                    "70",
                    "85"
                  ],
                  "type": "number",
                  "unit": "percent"
                },
                {
                  "alias": "Disk Reads / sec",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #H",
                  "thresholds": [
                    "10485760",
                    "20485760"
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "Disk Writes / sec",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #I",
                  "thresholds": [
                    "10485760",
                    "20485760"
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "Download*",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #J",
                  "thresholds": [
                    "30485760",
                    "104857600"
                  ],
                  "type": "number",
                  "unit": "bps"
                },
                {
                  "alias": "Upload*",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(50, 172, 45, 0.97)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(245, 54, 54, 0.9)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #K",
                  "thresholds": [
                    "30485760",
                    "104857600"
                  ],
                  "type": "number",
                  "unit": "bps"
                },
                {
                  "alias": "CPU Load 5m",
                  "align": "auto",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #L",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "",
                  "align": "right",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "pattern": "/.*/",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "(node_uname_info{cluster=\"$cluster\", instance=~\"($top_disk_read_nodes|$top_disk_write_nodes)\"} -0) * on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}",
                  "format": "table",
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Labels",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "max(irate(node_disk_read_bytes_total{cluster=\"$cluster\", instance=~\"$top_disk_read_nodes\"}[5m])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (instance)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Disk Reads / sec",
                  "refId": "H"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "PC3E95692D54ABCC0"
                  },
                  "exemplar": false,
                  "expr": "max((irate(node_disk_written_bytes_total{cluster=\"$cluster\", instance=~\"$top_disk_write_nodes\"}[5m])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"})) by (instance)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "legendFormat": "Disk Writes / sec",
                  "refId": "I"
                }
              ],
              "title": "Top $topN nodes by Disk usage",
              "transformations": [
                {
                  "id": "merge",
                  "options": {}
                },
                {
                  "id": "filterFieldsByName",
                  "options": {
                    "include": {
                      "names": [
                        "nodename",
                        "Value #D",
                        "Value #B",
                        "Value #C",
                        "Value #L",
                        "Value #F",
                        "Value #G",
                        "Value #E",
                        "Value #H",
                        "Value #I"
                      ]
                    }
                  }
                },
                {
                  "id": "organize",
                  "options": {
                    "excludeByName": {},
                    "indexByName": {},
                    "renameByName": {
                      "Value #H": "Reads / sec",
                      "Value #I": "Writes / sec",
                      "nodename": "Node"
                    }
                  }
                }
              ],
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "PC3E95692D54ABCC0"
              },
              "refId": "A"
            }
          ],
          "title": "Top nodes by Disk usage",
          "type": "row"
        }
      ],
      "refresh": "",
      "schemaVersion": 38,
      "style": "dark",
      "tags": [
        "k8s",
        "top",
        "nodes",
        "pods",
        "namespaces"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false,
              "text": "Platform Monitoring Prometheus",
              "value": "Platform Monitoring Prometheus"
            },
            "hide": 0,
            "includeAll": false,
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "queryValue": "",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "current": {
              "isNone": true,
              "selected": false,
              "text": "None",
              "value": ""
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "label_values(up, cluster)",
            "hide": 0,
            "includeAll": false,
            "multi": false,
            "name": "cluster",
            "options": [],
            "query": {
              "query": "label_values(up, cluster)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": "10",
              "value": "10"
            },
            "hide": 0,
            "includeAll": false,
            "multi": false,
            "name": "topN",
            "options": [
              {
                "selected": false,
                "text": "1",
                "value": "1"
              },
              {
                "selected": false,
                "text": "5",
                "value": "5"
              },
              {
                "selected": true,
                "text": "10",
                "value": "10"
              },
              {
                "selected": false,
                "text": "20",
                "value": "20"
              },
              {
                "selected": false,
                "text": "100",
                "value": "100"
              }
            ],
            "query": "1,5,10,20,100",
            "queryValue": "",
            "skipUrlSync": false,
            "type": "custom"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum by (namespace, pod) (rate(container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\", cluster=\"$cluster\"}[${__range_s}s]))))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_cpu_pods",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum by (namespace, pod) (rate(container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\", cluster=\"$cluster\"}[${__range_s}s]))))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*pod=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}) by (pod)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_mem_pods",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}) by (pod)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*pod=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum (rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (pod)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_disk_read_pods",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum (rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (pod)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*pod=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum (rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (pod)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_disk_write_pods",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum (rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (pod)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*pod=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum by (namespace) (rate(container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\", cluster=\"$cluster\"}[${__range_s}s]))))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_cpu_namespaces",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum by (namespace) (rate(container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\", cluster=\"$cluster\"}[${__range_s}s]))))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*namespace=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}) by (namespace)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_mem_namespaces",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum(container_memory_rss{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}) by (namespace)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*namespace=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum (rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (namespace)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_disk_read_namespaces",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum (rate(container_fs_reads_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (namespace)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*namespace=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, sum (rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (namespace)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_disk_write_namespaces",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, sum (rate(container_fs_writes_bytes_total{cluster=\"$cluster\", container!~\"^(.*POD.*|)$\"}[${__range_s}s])) by (namespace)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*namespace=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, rate(container_cpu_cfs_throttled_seconds_total[${__range_s}s])))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_throttled_pods",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, rate(container_cpu_cfs_throttled_seconds_total[${__range_s}s])))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*pod=\"([\\w\\s\\d-_]+)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, (1 - avg(irate(node_cpu_seconds_total{mode=\"idle\",cluster=\"$cluster\"}[${__range_s}s])) by (instance)) * 100))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_cpu_nodes",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, (1 - avg(irate(node_cpu_seconds_total{mode=\"idle\",cluster=\"$cluster\"}[${__range_s}s])) by (instance)) * 100))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*instance=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, (1 - ((node_memory_MemAvailable_bytes{cluster=\"$cluster\"} / (node_memory_MemTotal_bytes{cluster=\"$cluster\"})))) * 100))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_memory_nodes",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, (1 - ((node_memory_MemAvailable_bytes{cluster=\"$cluster\"} / (node_memory_MemTotal_bytes{cluster=\"$cluster\"})))) * 100))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*instance=\"([\\w\\s\\d\\.-_]+)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, max(irate(node_disk_read_bytes_total{cluster=\"$cluster\"}[${__range_s}s])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (instance)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_disk_read_nodes",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, max(irate(node_disk_read_bytes_total{cluster=\"$cluster\"}[${__range_s}s])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"}) by (instance)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*instance=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": {
              "uid": "${datasource}"
            },
            "definition": "query_result(topk($topN, max((irate(node_disk_written_bytes_total{cluster=\"$cluster\"}[${__range_s}s])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"})) by (instance)))",
            "hide": 2,
            "includeAll": true,
            "multi": true,
            "name": "top_disk_write_nodes",
            "options": [],
            "query": {
              "query": "query_result(topk($topN, max((irate(node_disk_written_bytes_total{cluster=\"$cluster\"}[${__range_s}s])* on(node) group_left(label_kubernetes_io_hostname) kube_node_labels{label_kubernetes_io_hostname=~\".*\"})) by (instance)))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": ".*instance=\"(.*)\".*",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": false,
              "text": "",
              "value": ""
            },
            "hide": 0,
            "label": "Exclude Annotations",
            "name": "exclude_annotations",
            "options": [
              {
                "selected": true,
                "text": "",
                "value": ""
              }
            ],
            "query": "",
            "skipUrlSync": false,
            "type": "textbox"
          }
        ]
      },
      "time": {
        "from": "now-30m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Kubernetes / Top Resources",
      "uid": "{% printf `%.40s` (printf `%s-%s` .Release.Namespace (index .DashboardsUIDs `kubernetes-top-resources`) ) %}",
      "version": 1,
      "weekStart": ""
    }
